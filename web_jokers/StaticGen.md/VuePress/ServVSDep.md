---
layout: default
title: 線上伺服器抑或長久佈建
parent: VuePress
grand_parent: Static Site Generators
nav_order: 1
last_modified_date: 2023-06-12 08:56:43
tags: VuPress
---

# 線上伺服器抑或長久佈建
{: .no_toc }

<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>
---

## 方案介紹

VuePress 的線上伺服器和長期部署方案各有優缺點，選擇取決於你的專案需求和偏好。 以下是兩種方案的主要特點：

## VuePress 線上伺服器方案

### 必要性與特色

使用類似於 Visual Studio Code (VS Code) 這樣的整合開發環境（IDE），它提供了即時預覽 Markdown 檔案的功能，那麼在開發和預覽階段可能就不太需要依賴線上伺服器方案。 IDE的即時預覽功能可讓你在編輯Markdown檔案的同時即時查看最終渲染的效果。

然而，線上伺服器方案仍然可能具有以下一些優點：

1. **真實環境測試：** 線上伺服器提供了在真實環境中測試和查看網站效果的機會，包括處理網路請求、實際部署環境等。 有些特定的功能或效果可能在本機開發環境中無法完全模擬。

2. **團隊協作：** 如果多人協作或需要共享連結以獲取回饋，線上伺服器方案提供了一個集中的位置，方便團隊協作和分享。

3. **整合其他服務：** 一些線上伺服器平台提供了整合其他服務的功能，例如自動部署、網域管理等，使整個開發和部署流程更為方便。

4. **測試不同環境：** 在線上伺服器上可以測試不同環境下的渲染效果，例如行動裝置和不同瀏覽器。

因此，選擇是否使用線上伺服器方案還是完全依賴本地IDE即時預覽，取決於專案的特定需求和開發流程。 在某些情況下，這兩種方式也可以結合使用，以便在本地進行開發和測試，並在需要時部署到線上伺服器以獲取更真實的使用者體驗。

### 優點

1. **簡單快速：** 部署到線上伺服器是最直接的方式，通常速度較快，而且易於設定。

2. **彈性擴充：** 可依需求選擇不同規模的伺服器，根據存取量進行彈性擴充。

3. **自由度高：** 你可以選擇使用任何你喜歡的伺服器供應商，並具有更多的自訂選項。

### 缺點

1. **成本：** 部署到線上伺服器可能需要支付伺服器租賃費用，特別是在高流量時。

2. **管理維護：** 你需要負責伺服器的管理和維護，包括安全性、效能最佳化、備份等。

## VuePress 長期佈建方案

### 佈建串流方案

在公司內部進行 VuePress 長期部署時，可以考慮不同的部署方案，根據特定需求選擇最適合的。 以下是一些可能的方案，以及它們的特性和優缺點：

1. **自建伺服器：**

- **特性：**
  - 公司內部搭建自有伺服器，完全掌控環境。
  - 可以進行高度的自訂和配置，以適應特定的安全性和性能要求。

- **優點：**
  - 完全掌控環境和安全性。
  - 可依照公司的需求進行客製化配置。

- **缺點：**
  - 需要公司自行負責伺服器的維護和管理。
  - 可能需要較多的硬體和人力資源投入。

2. **內部雲端平台：**

- **特性：**
  - 在公司內部建置雲端平台，例如使用 OpenStack、VMware 等。
  - 提供雲端運算的靈活性和資源管理功能。

- **優點：**
  - 靈活性高，能依需求動態調整資源。
  - 提供雲端平台的一些便利性，如快速部署和擴充。

- **缺點：**
  - 需要專業知識來建立和維護雲端平台。
  - 部署和管理成本相對較高。

3. **Docker 映像與容器化部署：**

- **特性：**
  - 使用 Docker 建立和管理容器，實現環境的隔離和一致性。
  - 使用容器編排工具，如 Kubernetes 進行自動化管理。

- **優點：**
  - 提供環境隔離和一致性，避免了「在我的機器上能運作」的問題。
  - 可以輕鬆地進行橫向擴展和管理多個實例。

- **缺點：**
  - 學習曲線較陡峭，需要掌握 Docker 和容器編排工具的知識。
  - 需要額外的資源用於容器編排和管理。

4. **持續整合與持續部署（CI/CD）：**

- **特性：**
  - 使用 CI/CD 工具，如 Jenkins、GitLab CI 等，將程式碼自動建置、測試和部署。
  - 可以設定定時或觸發器來進行自動化的持續整合和部署。

- **優點：**
  - 自動化流程，減少了手動介入和錯誤。
  - 快速回饋，及時發現和解決問題。

- **缺點：**
  - 需要設定和維護 CI/CD 工具。
  - 部署流程可能需要經過一定的學習和調整。

選擇合適的部署方案取決於公司的需求、資源、技術水準和管理偏好。 通常，使用一些現代化的工具和平台，如雲端平台、Docker 和 CI/CD，可以提高部署的靈活性和效率。

### 整合方案

然而前述後三個方案並不是互斥的，而是可以互相結合使用的。 例如，你可以在虛擬機器（VM）環境中使用 Docker 建置和執行容器化的服務，並結合 Jenkins 進行自動化持續整合和部署。

具體的組合方式可以包括：

1. **Docker 在 VM 環境中：**
    - 使用虛擬機器作為基礎設施，建立 Docker 環境。
    - 在虛擬機器中使用 Docker 容器運行應用程序，實現環境隔離和一致性。

2. **Jenkins 自動化部署服務：**
    - 使用 Jenkins 進行自動化的持續整合和部署。
    - 設定 Jenkins 任務，包括拉取程式碼、建置、測試和部署等步驟。

3. **整合 CI/CD 和容器編排：**
    - 將 CI/CD 流程與容器編排工具結合使用，例如 Kubernetes。
    - 在 CI/CD 流程中使用容器編排工具來部署和管理容器化的應用程式。

這種組合的優點在於：

- **靈活性：** 透過結合 Docker 和 Jenkins，可以實現靈活的容器化部署，並利用 Jenkins 的自動化流程來管理整個建置和部署流程。

- **環境一致性：** 使用 Docker 可以實現環境的一致性，而 Jenkins 則提供了對 CI/CD 流程的自動化控制，確保在不同環境中的一致性。

- **橫向擴展：** 利用容器編排工具，可以輕鬆地進行橫向擴展和管理多個實例，適應不同規模的項目和變化的負載。

整體而言，這種綜合利用的方式可以提高開發和部署的效率，同時也兼顧了靈活性和自動化的優勢。 但要注意的是，引進多個工具和技術也需要團隊對這些工具的熟悉和管理的成本。

### 優點

1. **免費服務：** 有一些平台（例如 GitHub Pages、Netlify、Vercel）提供免費的持續整合和部署服務，方便快速。

2. **自動化：** 長期部署平台通常具有自動建置和部署的功能，無需手動操作，方便自動化。

3. **無伺服器架構：** 有些平台採用無伺服器（serverless）架構，無需關心底層伺服器配置，減輕了維護負擔。

### 缺點

1. **限制：** 免費服務通常有資源限制，可能不適用於大型高流量專案。

2. **依賴第三方：** 長期佈建方案依賴第三方服務，如果服務商發生故障或更改政策，可能會對專案產生影響。

綜合考慮，如果你希望簡單、快速並具有更多自訂選項，且能夠承擔一定的成本和管理負擔，選擇線上伺服器方案可能更合適。 如果你更注重方便、快速、免費的部署方式，並且能夠接受一些限制，長期佈建方案可能更適合你。

## 同時存在的情況

同一個檔案系統可以同時存在這兩種形式的服務，也就是線上伺服器部署和長期部署服務。 這種情況可能會在以下幾種情況下發生：

1. **靈活性和備份：** 你可能選擇在線上伺服器上部署主要的生產環境，以滿足靈活性和自訂的需求。 同時，使用長期部署服務作為備份或測試環境，方便快速的自動化部署和測試新的修改。

2. **開發和部署隔離：** 在開發階段，你可能會使用長期部署服務進行頻繁的自動化建置和測試，而在最終生產環境中使用線上伺服器進行穩定且可控的部署。

3. **成本與資源控制：** 長期佈建服務通常提供免費額度，適用於小型專案或個人使用。 但在處理大流量和複雜業務需求時，可能需要額外的資源，此時線上伺服器可能更適合，儘管需要支付額外成本。

4. **多環境支援：** 如果你需要維護多個環境，例如開發、測試和生產環境，可以選擇將其中一個或多個環境部署在長期佈建服務上，而將另一些環境部署在線上伺服器上。

總的來說，同一份文件系統可以適用於多種不同的部署方案，具體取決於專案的需求、資源預算和開發流程。 根據專案的特色和需求，你可以在不同的環境中選擇最適合的部署方式。

## 硬體方案

選擇在同一台多核心的工作站上負責多部門的 VuePress 檔案系統，還是使用 VM 的雲端平台架構，取決於特定的需求和考慮因素。 以下是比較這兩種方式的一些考慮因素：

### 同一台多核心的工作站：

#### 優點：

1. **資源共享：** 多核心工作站可以靈活分配資源，多個部門可以共享同一台伺服器的運算資源。

2. **簡單管理：** 在同一台伺服器上管理檔案系統相對簡單，維護成本可能較低。

3. **成本效益：** 在短期內，使用單一工作站可能會更成本效益，因為無需額外的虛擬化管理開銷。

#### 缺點：

1. **資源競爭：** 多個部門共享同一台伺服器的資源，可能在高負載時導致資源競爭和效能問題。

2. **隔離性差：** 部門之間的隔離性較差，一個部門的問題可能會影響到其他部門。

### VM 的雲端平台架構：

#### 優點：

1. **資源隔離：** 使用 VM 可以實現更好的資源隔離，各部門的應用在獨立的虛擬機器中運行，不容易相互影響。

2. **橫向擴展：** 雲端平台架構通常更容易實現橫向擴展，適應業務成長和變化。

3. **彈性和靈活性：** 雲端平台提供更多的彈性和靈活性，可以根據需要動態調整資源。

#### 缺點：

1. **管理複雜性：** 使用雲端平台需要更多的管理工作，包括虛擬機器的建立、配置、監控等。

2. **成本：** 在長期內，可能會因為使用雲端平台而導致較高的運維成本，特別是在高負載時。

綜合考慮，如果公司規模較小、資源需求相對較低，同時希望簡化管理，可能在同一台多核心的工作站上運行多部門的 VuePress 檔案系統是一種合適的選擇。 但如果公司規模較大、部門需要獨立隔離，並且更注重橫向擴展和彈性，那麼使用 VM 的雲端平台架構可能更適合。 在做出決策之前，最好先根據實際業務需求和長期規劃進行詳細的評估。